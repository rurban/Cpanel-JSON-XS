{"version":1,"ops":[{"type":1,"author":{"id":"18b679769de381b852b3ed5d3832bd5ebc63157a"},"timestamp":1520264098,"metadata":{"github-id":"MDU6SXNzdWUzMDIzNDU5NDg=","github-url":"https://github.com/rurban/Cpanel-JSON-XS/issues/105","origin":"github"},"title":"allow_blessed default behaviour (throw exception) does not work as documented","message":"If -\u003econvert_blessed is true but -\u003eallow_blessed is not, an object with no string overloading or TO_JSON method should throw an exception.\n\nThis works in JSON::XS but not Cpanel::JSON::XS:\n\n`$ cat wtf.pl`\n\n````\n#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse JSON::XS ();\nuse Cpanel::JSON::XS ();\n\nmy $json_xs = JSON::XS-\u003enew-\u003econvert_blessed;\nmy $cpanel_json_xs = Cpanel::JSON::XS-\u003enew-\u003econvert_blessed;\n\nmy $thing = bless {}, \"CAT\";\n\neval {\n  print \"json_xs: \" . $json_xs-\u003eencode({ cat =\u003e $thing });\n}; warn \"json_xs: $@\\n\" if $@;\n\neval {\n  print \"cpanel_json_xs: \" . $cpanel_json_xs-\u003eencode({ cat =\u003e $thing });\n}; warn \"cpanel_json_xs: $@\\n\" if $@;\n````\n\n`$ perl wtf.pl`\n````\njson_xs: encountered object 'CAT=HASH(0xe78da8)', but neither allow_blessed, convert_blessed nor allow_tags settings are enabled (or TO_JSON/FREEZE method missing) at wtf.pl line 15.\n\ncpanel_json_xs: {\"cat\":null}\n````","files":null}]}