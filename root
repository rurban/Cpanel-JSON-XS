{"version":1,"ops":[{"type":1,"author":{"id":"42b8049125821cad60d350df07d9d216b854f3f7"},"timestamp":1500555096,"metadata":{"github-id":"MDU6SXNzdWUyNDQzNTA4NTc=","github-url":"https://github.com/rurban/Cpanel-JSON-XS/issues/90","origin":"github"},"title":"Allow list context?","message":"See https://www.snellman.net/blog/archive/2017-07-18-wantarray/\nfor an interesting bug with JSON::PP failing to decode a File::Slurp file on windows, as\nJSON::XS (and this fork) apply scalar context to the arg, i.e. slurping all the lines into one huge string, and not a list of lines. The problem was with JSON::PP in list context and a wrong line split.\n \n```\ncv = newXSproto_portable(\"Cpanel::JSON::XS::decode_json\", XS_Cpanel__JSON__XS_decode_json, file, \"$;$\");\n```\n\nA change would be to disable `PROTOTYPES: ENABLE` for the encoder and decoder functions, and allow decode of array strings, not just a scalar.\nJSON::PP does so.\nBut this does not help with performance, only reading directly from an IO handle would help.\n\nNote: OP's underlying problem was not with JSON::XS but with JSON::PP using said list context of \nFile::Slurp, reading a file line by line, which failed on *wrong* line-endings: CRLF on linux split into CRLF. A JSON::PP bug with wrong white-space strictness.","files":null}]}