{"version":1,"ops":[{"type":1,"author":{"id":"498aa8348a1d0c97ad2c0bc141bde8232360f2ca"},"timestamp":1451562326,"metadata":{"github-id":"MDU6SXNzdWUxMjQ0NjMzMDA=","github-url":"https://github.com/rurban/Cpanel-JSON-XS/issues/56","origin":"github"},"title":"inf/nan detection on HP-UX","message":"I have experienced the following failure when trying to build Cpanel-JSON-XS-3.0210 on HP-UX\n- HP-UX B.11.23 U 9000/800\n- compiler: gcc version 4.6.1 (Target: hppa64-hp-hpux11.11)\n- perl-5.22.0 (osname=hpux, osvers=11.11, archname=PA-RISC2.0-thread-multi-LP64)\n\nThe failure looks like this\n\n```\nEntering Cpanel-JSON-XS-3.0210\nChecking configure dependencies from META.json\nChecking if you have ExtUtils::MakeMaker 6.58 ... Yes (7.04_01)\nRunning Makefile.PL\nConfiguring Cpanel-JSON-XS-3.0210 ... Checking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for Cpanel::JSON::XS\nWriting MYMETA.yml and MYMETA.json\nOK\nChecking dependencies from MYMETA.json ...\nChecking if you have Pod::Usage 1.33 ... Yes (1.67)\nChecking if you have Pod::Text 2.08 ... Yes (3.18)\nChecking if you have ExtUtils::MakeMaker 0 ... Yes (7.04_01)\nBuilding and testing Cpanel-JSON-XS-3.0210 ... cp XS.pm blib/lib/Cpanel/JSON/XS.pm\ncp XS/Boolean.pm blib/lib/Cpanel/JSON/XS/Boolean.pm\nRunning Mkbootstrap for Cpanel::JSON::XS ()\nchmod 644 \"XS.bs\"\n\"/opt/perl64/bin/perl\" \"/opt/perl64/lib/5.22.0/ExtUtils/xsubpp\"  -typemap \"/opt/perl64/lib/5.22.0/ExtUtils/typemap\" -typemap \"typemap\"  XS.xs \u003e XS.xsc \u0026\u0026 mv XS.xsc XS.c\ngcc64 -c   -D_POSIX_C_SOURCE=199506L -D_REENTRANT -mpa-risc-2-0 -fPIC -DPERL_DONT_CREATE_GVSV -D_HPUX_SOURCE -fwrapv -fno-strict-aliasing -pipe -I/usr/local/pa20_64/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_FORTIFY_SOURCE=2 -g -O   -DVERSION=\\\"3.0210\\\" -DXS_VERSION=\\\"3.0210\\\" -fPIC \"-I/opt/perl64/lib/5.22.0/PA-RISC2.0-thread-multi-LP64/CORE\"   XS.c\nrm -f blib/arch/auto/Cpanel/JSON/XS/XS.sl\n/usr/bin/ld  -b -L/usr/local/pa20_64/lib -L/usr/local/lib/pa20_64 -L/usr/lib/pa20_64 -L/usr/local/lib -L/pro/local/lib -L/lib/pa20_64 XS.o  -o blib/arch/auto/Cpanel/JSON/XS/XS.sl      \\\n                \\\n\nWarning: Some debug info sections were missing.\nPXDB aborted.\nchmod 755 blib/arch/auto/Cpanel/JSON/XS/XS.sl\n\"/opt/perl64/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- XS.bs blib/arch/auto/Cpanel/JSON/XS/XS.bs 644\ncp bin/cpanel_json_xs blib/script/cpanel_json_xs\n\"/opt/perl64/bin/perl\" -MExtUtils::MY -e 'MY-\u003efixin(shift)' -- blib/script/cpanel_json_xs\nManifying 1 pod document\nManifying 2 pod documents\nRunning Mkbootstrap for Cpanel::JSON::XS ()\nchmod 644 \"XS.bs\"\nPERL_DL_NONLAZY=1 \"/opt/perl64/bin/perl\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\nt/00_load.t ................. ok\nt/01_utf8.t ................. ok\nt/02_error.t ................ ok\nt/03_types.t ................ ok\nt/04_dwiw_encode.t .......... ok\nt/05_dwiw_decode.t .......... ok\nt/06_pc_pretty.t ............ ok\nt/07_pc_esc.t ............... ok\nt/08_pc_base.t .............. ok\nt/08_pc_base_nv.t ........... ok\nt/09_pc_extra_number.t ...... ok\nt/104_sortby.t .............. ok\nt/105_esc_slash.t ........... ok\nt/106_allow_barekey.t ....... ok\nt/107_allow_singlequote.t ... ok\nt/108_decode.t .............. ok\nt/109_encode.t .............. ok\nt/10_pc_keysort.t ........... ok\nt/110_bignum.t .............. ok\nt/112_upgrade.t ............. ok\nt/113_overloaded_eq.t ....... ok\nt/114_decode_prefix.t ....... ok\nt/115_tie_ixhash.t .......... ok\nt/116_incr_parse_fixed.t .... ok\nt/117_numbers.t ............. 1/19\n#   Failed test 'inf -\u003e null'\n#   at t/117_numbers.t line 7.\n#          got: '[++]'\n#     expected: '[null]'\n\n#   Failed test 'nan -\u003e null'\n#   at t/117_numbers.t line 8.\n#          got: '[-?]'\n#     expected: '[null]'\n\n#   Failed test '-inf -\u003e null'\n#   at t/117_numbers.t line 9.\n#          got: '[---]'\n#     expected: '[null]'\n\n#   Failed test '-nan -\u003e null'\n#   at t/117_numbers.t line 10.\n#          got: '[?]'\n#     expected: '[null]'\n\n#   Failed test '-nan -\u003e null'\n#   at t/117_numbers.t line 11.\n#          got: '[?]'\n#     expected: '[null]'\n\n#   Failed test 'inf -\u003e \"inf\"'\n#   at t/117_numbers.t line 25.\n#          got: '[++]'\n#     expected: '[\"inf\"]'\n\n#   Failed test '-inf -\u003e \"-inf\"'\n#   at t/117_numbers.t line 26.\n#          got: '[---]'\n#     expected: '[\"-inf\"]'\n\n#   Failed test 'nan -\u003e \"nan\"'\n#   at t/117_numbers.t line 29.\n#                   '[-?]'\n#     doesn't match '(?^:\\[\\\"(-nan|nan)\\\"\\])'\n\n#   Failed test '-nan -\u003e \"-nan\"'\n#   at t/117_numbers.t line 30.\n#                   '[?]'\n#     doesn't match '(?^:\\[\\\"(-nan|nan)\\\"\\])'\n\n#   Failed test '-nan -\u003e \"-nan\"'\n#   at t/117_numbers.t line 31.\n#                   '[?]'\n#     doesn't match '(?^:\\[\\\"(-nan|nan)\\\"\\])'\n\n#   Failed test 'inf'\n#   at t/117_numbers.t line 34.\n#          got: '[++]'\n#     expected: '[inf]'\n\n#   Failed test '-inf'\n#   at t/117_numbers.t line 35.\n#          got: '[---]'\n#     expected: '[-inf]'\n\n#   Failed test 'nan'\n#   at t/117_numbers.t line 36.\n#                   '[-?]'\n#     doesn't match '(?^:\\[(-nan|nan)\\])'\n\n#   Failed test '-nan'\n#   at t/117_numbers.t line 37.\n#                   '[?]'\n#     doesn't match '(?^:\\[(-nan|nan)\\])'\n\n#   Failed test '-nan'\n#   at t/117_numbers.t line 38.\n#                   '[?]'\n#     doesn't match '(?^:\\[(-nan|nan)\\])'\n# Looks like you failed 15 tests of 19.\nt/117_numbers.t ............. Dubious, test returned 15 (wstat 3840, 0xf00)\nFailed 15/19 subtests\nt/11_pc_expo.t .............. ok\nt/12_blessed.t .............. ok\nt/13_limit.t ................ ok\nt/14_latin1.t ............... ok\nt/15_prefix.t ............... ok\nt/16_tied.t ................. ok\nt/17_relaxed.t .............. ok\nt/18_json_checker.t ......... ok\nt/19_incr.t ................. ok\nt/20_faihu.t ................ ok\nt/20_unknown.t .............. Subroutine JSON::PP::Boolean::(0+ redefined at /opt/perl64/lib/5.22.0/overload.pm line 50.\nSubroutine JSON::PP::Boolean::(-- redefined at /opt/perl64/lib/5.22.0/overload.pm line 50.\nSubroutine JSON::PP::Boolean::(++ redefined at /opt/perl64/lib/5.22.0/overload.pm line 50.\nt/20_unknown.t .............. ok\nt/21_evans.t ................ ok\nt/22_comment_at_eof.t ....... ok\nt/23_array_ctx.t ............ ok\nt/24_freeze_recursion.t ..... ok\nt/25_boolean.t .............. ok\nt/52_object.t ............... ok\nt/53_readonly.t ............. ok\nt/54_stringify.t ............ ok\nt/55_modifiable.t ........... ok\nt/96_interop.t .............. skipped: JSON::XS and JSON required for testing interop\nt/96_mojo.t ................. skipped: Mojo::JSON required for testing interop\nt/97_unshare_hek.t .......... ok\nt/98_56only.t ............... ok\nt/99_binary.t ............... ok\nt/z_kwalitee.t .............. skipped: This test is only run for the module author\nt/z_leaktrace.t ............. skipped: require Test::LeakTrace\nt/z_meta.t .................. skipped: This test is only run for the module author\nt/z_perl_minimum_version.t .. skipped: Author tests not required for installation\nt/z_pod-coverage.t .......... skipped: This test is only run for the module author\nt/z_pod-spell-mistakes.t .... skipped: This test is only run for the module author\nt/z_pod-spelling.t .......... skipped: This test is only run for the module author\nt/z_pod.t ................... ok\nt/zero-mojibake.t ........... ok\n\nTest Summary Report\n-------------------\nt/117_numbers.t           (Wstat: 3840 Tests: 19 Failed: 15)\n  Failed tests:  1-15\n  Non-zero exit status: 15\nFiles=59, Tests=1519, 15 wallclock secs ( 1.33 usr  0.53 sys +  9.93 cusr  2.50 csys = 14.29 CPU)\nResult: FAIL\n```\n\nFYI: similar failure occurs also with HP C compiler","files":null}]}