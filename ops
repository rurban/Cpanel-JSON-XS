{"version":1,"ops":[{"type":1,"author":{"id":"cfbcaa4ccc85c548a53773770f9acbb38aa86d86"},"timestamp":1597101993,"metadata":{"github-id":"MDU6SXNzdWU2NzY0NzU0MDY=","github-url":"https://github.com/rurban/Cpanel-JSON-XS/issues/167","origin":"github"},"title":"canonical mode does not work with tied hashes","message":"I encountered this as I was testing serialization of tied hashes in my application (as I needed to preserve the tied nature, I switched to Storable here, so this bug is just a curiosity...)\n\nKeys are not sorted when serializing tied hashes. repro case:\n\n```\nuse strict;\nuse warnings;\nuse Cpanel::JSON::XS;\nuse Tie::Hash;\n\nmy %data;\n@data{'a'..'z'} = (1)x26;\nprint Cpanel::JSON::XS-\u003enew-\u003ecanonical-\u003eencode(\\%data), \"\\n\";\n\nmy %hash;\ntie(%hash, 'Tie::StdHash');\n@hash{'a'..'z'} = (1)x26;\nprint Cpanel::JSON::XS-\u003enew-\u003ecanonical-\u003eencode(\\%hash), \"\\n\";\n```\n\nexample output:\n\n```\n{\"a\":1,\"b\":1,\"c\":1,\"d\":1,\"e\":1,\"f\":1,\"g\":1,\"h\":1,\"i\":1,\"j\":1,\"k\":1,\"l\":1,\"m\":1,\"n\":1,\"o\":1,\"p\":1,\"q\":1,\"r\":1,\"s\":1,\"t\":1,\"u\":1,\"v\":1,\"w\":1,\"x\":1,\"y\":1,\"z\":1}\n{\"l\":1,\"s\":1,\"p\":1,\"z\":1,\"i\":1,\"j\":1,\"g\":1,\"t\":1,\"q\":1,\"x\":1,\"r\":1,\"y\":1,\"u\":1,\"w\":1,\"b\":1,\"h\":1,\"o\":1,\"f\":1,\"c\":1,\"n\":1,\"v\":1,\"e\":1,\"m\":1,\"a\":1,\"d\":1,\"k\":1}\n```","files":null}]}