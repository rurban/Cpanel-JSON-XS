{"version":1,"ops":[{"type":3,"author":{"id":"42b8049125821cad60d350df07d9d216b854f3f7"},"timestamp":1383317546,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI3NTcwOTYx","github-url":"https://github.com/rurban/Cpanel-JSON-XS/issues/10#issuecomment-27570961"},"message":"Thanks for the testcase! Constant hash keys are stored as shared hek's, and destruction of those is not easy.\nI had the same problem in the perl compiler. Will be fixed ASAP.\n\nImmediately asserts in a debugging perl at `assert (he-\u003eshared_he_he.hent_hek == hek);`\n\n```\n#5  0x00007ffff7ae355b in Perl_unshare_hek (hek=0x41b9d8) at hv.c:2635\n2635        unshare_hek_or_pvn(hek, NULL, 0, 0);\n(gdb) p *hek\n$1 = {hek_hash = 49, hek_len = 0, hek_key = \"{\"}\n```\n\nwhich is your shared hek PV:\n\n```\n(gdb) p Perl_sv_dump(string)\nSV = PV(0x404240) at 0x405ed8\n  REFCNT = 1\n  FLAGS = (PADMY,POK,FAKE,READONLY,pPOK)\n  PV = 0x424230 \"{\\\"foo\\\":\\\"bar\\\"}\"\n  CUR = 13\n  LEN = 0\n```","files":null},{"type":4,"author":{"id":"42b8049125821cad60d350df07d9d216b854f3f7"},"timestamp":1383403301,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50NzM2Nzc5NjI="},"status":2}]}