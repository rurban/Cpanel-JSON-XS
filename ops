{"version":1,"ops":[{"type":5,"author":{"id":"42b8049125821cad60d350df07d9d216b854f3f7"},"timestamp":1553255563,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDIyMjI0MDQ3NTY="},"added":["bug"],"removed":[]},{"type":3,"author":{"id":"565cfa24cb40f5f46eab5bea83bd1fe59645edd8"},"timestamp":1553256982,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ3NTU5ODg3MQ==","github-url":"https://github.com/rurban/Cpanel-JSON-XS/issues/126#issuecomment-475598871"},"message":"I've made a deeper investigation which shows, that this tests fails because of our custom changes to Test::Builder. The source was such this change:\n```diff\n--- a/perl/site/lib/Test/Builder.pm\n+++ b/perl/site/lib/Test/Builder.pm\n@@ -1865,6 +1865,7 @@ sub output {\n     if( defined $fh ) {\n         $self-\u003e{Out_FH} = $self-\u003e_new_fh($fh);\n     }\n+    binmode $self-\u003e{Out_FH}, ':encoding(UTF-8)';\n     return $self-\u003e{Out_FH};\n }\n \n@@ -1874,6 +1875,7 @@ sub failure_output {\n     if( defined $fh ) {\n         $self-\u003e{Fail_FH} = $self-\u003e_new_fh($fh);\n     }\n+    binmode $self-\u003e{Fail_FH}, ':encoding(UTF-8)';\n     return $self-\u003e{Fail_FH};\n }\n```\n\nThe reason was to let polish character be outputed in tests, but looks like it break some other tests. Without this tests runs fine.","files":null},{"type":6,"author":{"id":"565cfa24cb40f5f46eab5bea83bd1fe59645edd8"},"timestamp":1553256982,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDE5OTg1ODkwNg=="},"target":"941c0fd88c6cda22f82d5a9d000c2ca0af430cc01cbd00cd014b55bf9fb4abd4","message":"I've made a deeper investigation which shows, that this tests fails because of our custom changes to Test::Builder. The source was such this change:\n```diff\n--- a/perl/site/lib/Test/Builder.pm\n+++ b/perl/site/lib/Test/Builder.pm\n@@ -1865,6 +1865,7 @@ sub output {\n     if( defined $fh ) {\n         $self-\u003e{Out_FH} = $self-\u003e_new_fh($fh);\n     }\n+    binmode $self-\u003e{Out_FH}, ':encoding(UTF-8)';\n     return $self-\u003e{Out_FH};\n }\n \n@@ -1874,6 +1875,7 @@ sub failure_output {\n     if( defined $fh ) {\n         $self-\u003e{Fail_FH} = $self-\u003e_new_fh($fh);\n     }\n+    binmode $self-\u003e{Fail_FH}, ':encoding(UTF-8)';\n     return $self-\u003e{Fail_FH};\n }\n```\n\nThe reason was to let polish character be outputed in tests, but looks like it break some other tests. Without this tests run fine.","files":null},{"type":3,"author":{"id":"d19730b1d47a47ba43733401ca1bc3d2bbb7f976"},"timestamp":1553270882,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ3NTY3OTc3OQ==","github-url":"https://github.com/rurban/Cpanel-JSON-XS/issues/126#issuecomment-475679779"},"message":"This is not correct to apply to Test::Builder. You need to encode all your data to UTF-8 yourself. The newer Test2 framework has a UTF8 plugin that will do this correctly.","files":null},{"type":6,"author":{"id":"d19730b1d47a47ba43733401ca1bc3d2bbb7f976"},"timestamp":1553270882,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDE5OTk2NDI2OA=="},"target":"66957ac75f827a0970617750b0fb0309cf2f9899e8b557a232df4e22b588e5e1","message":"This is not correct to apply to Test::Builder. You need to encode all the data that will be output to UTF-8 yourself. The newer Test2 framework has a UTF8 plugin that will do this correctly.","files":null},{"type":3,"author":{"id":"42b8049125821cad60d350df07d9d216b854f3f7"},"timestamp":1553590941,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ3NjUzMjgyOA==","github-url":"https://github.com/rurban/Cpanel-JSON-XS/issues/126#issuecomment-476532828"},"message":"Ok, thanks to the explanation. I was worried a bit.","files":null},{"type":4,"author":{"id":"42b8049125821cad60d350df07d9d216b854f3f7"},"timestamp":1553590941,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MjIyODk2MzMxNQ=="},"status":2},{"type":5,"author":{"id":"42b8049125821cad60d350df07d9d216b854f3f7"},"timestamp":1553590951,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDIyMjg5NjM3NTA="},"added":["invalid"],"removed":[]},{"type":5,"author":{"id":"42b8049125821cad60d350df07d9d216b854f3f7"},"timestamp":1553590951,"metadata":{"github-id":"MDE0OlVubGFiZWxlZEV2ZW50MjIyODk2Mzc1NA=="},"added":[],"removed":["bug"]}]}