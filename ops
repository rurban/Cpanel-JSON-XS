{"version":1,"ops":[{"type":1,"author":{"id":"f28cbec155a538c1c4198680587769c82b05cb90"},"timestamp":1572836176,"metadata":{"github-id":"MDU6SXNzdWU1MTY5Mzc4ODk=","github-url":"https://github.com/rurban/Cpanel-JSON-XS/issues/154","origin":"github"},"title":"Minute corruption of unrepresentable float","message":"I encountered a specific corner case and I'm not sure whether it fits the spec on numerical precision and accuracy - **decoding the `0.3` numerical value**, which has no precise representation in binary floating point.\n\nIts _closest_ representable value is `2.99999999999999988898e-01`, but JSON-XS decodes it as `0.30000000000000004` [instead](https://github.com/maxmind/MaxMind-DB/issues/72). I suspect the root cause to be somewhere in the `json_atof` function or one of its dependencies.\n\nHere's a small script that reproduces the issue:\n```perl\nuse Cpanel::JSON::XS qw( decode_json );\n\nmy $literal_float = 0.3;\nmy $json_object = decode_json('{\"value\": 0.3}');\nmy $json_float = $json_object-\u003e{value};\n\nmy $difference = $literal_float - $json_float;\nprint \"$difference\\n\"\n```\nIt outputs `-5.55111512312578e-17`. Is this expected?","files":null}]}