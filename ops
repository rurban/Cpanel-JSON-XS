{"version":1,"ops":[{"type":1,"author":{"id":"6017d91b659b06eac94f112943f0ac411d224bd4"},"timestamp":1517597047,"metadata":{"github-id":"MDU6SXNzdWUyOTM5ODUyNzg=","github-url":"https://github.com/rurban/Cpanel-JSON-XS/issues/101","origin":"github"},"title":"Version 4.00: Test dies with SIGSEGV","message":"Under CentOS Linux release 7.4.1708 the last test of 117_numbers.t dies with SIGSEGV.\n\n{\n  use POSIX qw(setlocale);\n  setlocale(\u0026POSIX::LC_ALL, \"fr_FR.utf-8\");\n  is encode_json({\"invalid\" =\u003e 123.45}), qq|{\"invalid\":123.45}|,\n    \"numeric radix\";\n}\n\nat setlocale.\n\nperl -V\n[perl-V.txt](https://github.com/rurban/Cpanel-JSON-XS/files/1690440/perl-V.txt)\n\nCoredump Backtrace\n(gdb) bt\n#0  0x00007fee221e3eac in __freelocale (dataset=dataset@entry=0x0) at freelocale.c:44\n#1  0x00007fee1b87ff8b in encode_sv (my_perl=my_perl@entry=0x1c47010, enc=enc@entry=0x7ffde1465050, sv=0x2183918, typesv=\u003coptimized out\u003e, typesv@entry=0x1c47838) at XS.xs:1785\n#2  0x00007fee1b8817ca in encode_hv (my_perl=my_perl@entry=0x1c47010, enc=enc@entry=0x7ffde1465050, hv=0x2174d48, typesv=typesv@entry=0x1c47838) at XS.xs:1301\n#3  0x00007fee1b8804e6 in encode_sv (my_perl=my_perl@entry=0x1c47010, enc=enc@entry=0x7ffde1465050, sv=sv@entry=0x218ef40, typesv=0x1c47838) at XS.xs:1659\n#4  0x00007fee1b883524 in encode_json (my_perl=my_perl@entry=0x1c47010, scalar=0x218ef40, json=json@entry=0x7ffde14650e0, typesv=\u003coptimized out\u003e) at XS.xs:2083\n#5  0x00007fee1b883986 in XS_Cpanel__JSON__XS_encode_json (my_perl=0x1c47010, cv=\u003coptimized out\u003e) at XS.xs:4295\n#6  0x00007fee235c440f in Perl_pp_entersub (my_perl=0x1c47010) at pp_hot.c:2778\n#7  0x00007fee235bcb86 in Perl_runops_standard (my_perl=0x1c47010) at run.c:41\n#8  0x00007fee23559985 in S_run_body (oldscope=\u003coptimized out\u003e, my_perl=\u003coptimized out\u003e) at perl.c:2402\n#9  perl_run (my_perl=0x1c47010) at perl.c:2320\n#10 0x0000000000400d99 in main (argc=2, argv=0x7ffde1465428, env=0x7ffde1465440) at perlmain.c:120","files":null}]}