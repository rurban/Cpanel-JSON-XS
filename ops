{"version":1,"ops":[{"type":1,"author":{"id":"65b6755d6747727bc7089f4061cb8ad439fd4d36"},"timestamp":1486753677,"metadata":{"github-id":"MDU6SXNzdWUyMDY4ODA0NjI=","github-url":"https://github.com/rurban/Cpanel-JSON-XS/issues/79","origin":"github"},"title":"Tests fail on ppc64le-linux-ld and aarch64-linux-ld","message":"Hi, I'm working on expanding our CI system to more architecture and found that tests fail on ppc64le (i.e. \"Power 8\" in LE mode) and aarch64-linux-ld. It occurs for all long-double versions tested from 14 through 24.  Tests passed for non-long-double variants.  Here is an example of the output, which appears similar on both architectures and various perls (I spot checked only):\n\n```\n[2017/02/10 10:13:06.017] Unpacking Cpanel-JSON-XS-3.0225.tar.gz\n[2017/02/10 10:13:06.018] --\u003e Working on Cpanel::JSON::XS\n[2017/02/10 10:13:06.018] Fetching http://www.cpan.org/authors/id/R/RU/RURBAN/Cpanel-JSON-XS-3.0225.tar.gz ... OK\n...\n[2017/02/10 10:13:06.142] Checking if you have ExtUtils::MakeMaker 6.58 ... Yes (7.24)\n[2017/02/10 10:13:06.153] Running Makefile.PL\n[2017/02/10 10:13:06.391] Configuring Cpanel-JSON-XS-3.0225 ... Checking if your kit is complete...\n[2017/02/10 10:13:06.392] Looks good\n[2017/02/10 10:13:06.672] Generating a Unix-style Makefile\n[2017/02/10 10:13:06.672] Writing Makefile for Cpanel::JSON::XS\n[2017/02/10 10:13:06.672] Writing MYMETA.yml and MYMETA.json\n[2017/02/10 10:13:06.723] Checking dependencies from MYMETA.json ...\n[2017/02/10 10:13:06.763] Checking if you have ExtUtils::MakeMaker 0 ... Yes (7.24)\n[2017/02/10 10:13:06.771] Checking if you have Pod::Text 2.08 ... Yes (3.15)\n[2017/02/10 10:13:07.133] OK\n[2017/02/10 10:13:07.133] Building and testing Cpanel-JSON-XS-3.0225 ... cp XS/Boolean.pm blib/lib/Cpanel/JSON/XS/Boolean.pm\n[2017/02/10 10:13:07.133] cp XS.pm blib/lib/Cpanel/JSON/XS.pm\n[2017/02/10 10:13:07.138] Running Mkbootstrap for XS ()\n[2017/02/10 10:13:07.161] chmod 644 \"XS.bs\"\n[2017/02/10 10:13:07.165] \"/opt/perl/14.4ld/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- XS.bs blib/arch/auto/Cpanel/JSON/XS/XS.bs 644\n[2017/02/10 10:13:07.178] \"/opt/perl/14.4ld/bin/perl\" \"/opt/perl/14.4ld/lib/5.14.4/ExtUtils/xsubpp\"  -typemap '/opt/perl/14.4ld/lib/5.14.4/ExtUtils/typemap' -typemap '/home/mci-exec/.cpanm/work/1486739001.30597/Cpanel-JSON-XS-3.0225/typemap'  XS.xs \u003e XS.xsc\n[2017/02/10 10:13:07.354] mv XS.xsc XS.c\n[2017/02/10 10:13:07.358] cc -c   -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -g   -DVERSION=\\\"3.0225\\\" -DXS_VERSION=\\\"3.0225\\\" -fPIC \"-I/opt/perl/14.4ld/lib/5.14.4/ppc64le-linux-ld/CORE\"   XS.c\n[2017/02/10 10:13:07.880] rm -f blib/arch/auto/Cpanel/JSON/XS/XS.so\n[2017/02/10 10:13:07.882] cc  -shared -g -L/usr/local/lib -fstack-protector XS.o  -o blib/arch/auto/Cpanel/JSON/XS/XS.so  \\\n[2017/02/10 10:13:07.883]       \\\n[2017/02/10 10:13:07.927] chmod 755 blib/arch/auto/Cpanel/JSON/XS/XS.so\n[2017/02/10 10:13:07.937] cp bin/cpanel_json_xs blib/script/cpanel_json_xs\n[2017/02/10 10:13:07.939] \"/opt/perl/14.4ld/bin/perl\" -MExtUtils::MY -e 'MY-\u003efixin(shift)' -- blib/script/cpanel_json_xs\n[2017/02/10 10:13:08.205] Manifying 1 pod document\n[2017/02/10 10:13:08.557] Manifying 2 pod documents\n[2017/02/10 10:13:08.570] \"/opt/perl/14.4ld/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- XS.bs blib/arch/auto/Cpanel/JSON/XS/XS.bs 644\n[2017/02/10 10:13:08.591] PERL_DL_NONLAZY=1 \"/opt/perl/14.4ld/bin/perl\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\n[2017/02/10 10:13:08.720] t/00_load.t ................. ok\n[2017/02/10 10:13:08.915] t/01_utf8.t ................. ok\n[2017/02/10 10:13:08.991] t/02_error.t ................ ok\n[2017/02/10 10:13:09.021] t/03_types.t ................ ok\n[2017/02/10 10:13:09.046] t/04_dwiw_encode.t .......... ok\n[2017/02/10 10:13:09.073] t/05_dwiw_decode.t .......... ok\n[2017/02/10 10:13:09.194] t/06_pc_pretty.t ............ ok\n[2017/02/10 10:13:09.275] t/07_pc_esc.t ............... ok\n[2017/02/10 10:13:09.403] t/08_pc_base.t .............. ok\n[2017/02/10 10:13:09.487] t/08_pc_base_nv.t ........... ok\n[2017/02/10 10:13:09.553] t/09_pc_extra_number.t ...... ok\n[2017/02/10 10:13:09.658] t/104_sortby.t .............. ok\n[2017/02/10 10:13:09.737] t/105_esc_slash.t ........... ok\n[2017/02/10 10:13:09.813] t/106_allow_barekey.t ....... ok\n[2017/02/10 10:13:09.877] t/107_allow_singlequote.t ... ok\n[2017/02/10 10:13:09.983] t/108_decode.t .............. ok\n[2017/02/10 10:13:10.063] t/109_encode.t .............. ok\n[2017/02/10 10:13:10.173] t/10_pc_keysort.t ........... ok\n[2017/02/10 10:13:10.295] t/110_bignum.t .............. ok\n[2017/02/10 10:13:10.393] t/112_upgrade.t ............. ok\n[2017/02/10 10:13:10.471] t/113_overloaded_eq.t ....... ok\n[2017/02/10 10:13:10.554] t/114_decode_prefix.t ....... ok\n[2017/02/10 10:13:10.620] t/115_tie_ixhash.t .......... ok\n[2017/02/10 10:13:10.719] t/116_incr_parse_fixed.t .... ok\n[2017/02/10 10:13:10.802] t/117_numbers.t ............. ok\n[2017/02/10 10:13:10.869] #   Failed test 'digit 1.01e+30'\n[2017/02/10 10:13:10.870] #   at t/11_pc_expo.t line 42.\n[2017/02/10 10:13:10.870] #                   '[1010000000000000000000000000000.0]'\n[2017/02/10 10:13:10.870] #     doesn't match '(?^:\\[1.01[Ee]\\+0?30\\])'\n[2017/02/10 10:13:10.870] # Looks like you failed 1 test of 8.\n[2017/02/10 10:13:10.875] t/11_pc_expo.t ..............\n[2017/02/10 10:13:10.875] Dubious, test returned 1 (wstat 256, 0x100)\n[2017/02/10 10:13:10.875] Failed 1/8 subtests\n[2017/02/10 10:13:10.903] t/12_blessed.t .............. ok\n[2017/02/10 10:13:11.012] t/13_limit.t ................ ok\n[2017/02/10 10:13:11.101] t/14_latin1.t ............... ok\n[2017/02/10 10:13:11.209] t/15_prefix.t ............... ok\n[2017/02/10 10:13:11.243] t/16_tied.t ................. ok\n[2017/02/10 10:13:11.322] t/17_relaxed.t .............. ok\n[2017/02/10 10:13:11.404] t/18_json_checker.t ......... ok\n[2017/02/10 10:13:11.707] t/19_incr.t ................. ok\n[2017/02/10 10:13:11.828] t/20_faihu.t ................ ok\n[2017/02/10 10:13:11.891] t/20_unknown.t .............. skipped: JSON 2.09 required for cross testing\n[2017/02/10 10:13:11.998] t/21_evans.t ................ ok\n[2017/02/10 10:13:12.093] t/22_comment_at_eof.t ....... ok\n[2017/02/10 10:13:12.122] t/23_array_ctx.t ............ ok\n[2017/02/10 10:13:12.142] t/24_freeze_recursion.t ..... ok\n[2017/02/10 10:13:12.253] t/25_boolean.t .............. ok\n[2017/02/10 10:13:12.515] t/30_jsonspec.t ............. ok\n[2017/02/10 10:13:12.645] t/31_bom.t .................. ok\n[2017/02/10 10:13:12.681] t/52_object.t ............... ok\n[2017/02/10 10:13:12.750] t/53_readonly.t ............. ok\n[2017/02/10 10:13:12.871] t/54_stringify.t ............ skipped: JSON required for cross testing\n[2017/02/10 10:13:12.980] t/55_modifiable.t ........... ok\n[2017/02/10 10:13:13.081] t/96_interop.t .............. skipped: JSON::XS and JSON required for testing interop\n[2017/02/10 10:13:13.182] t/96_mojo.t ................. skipped: Mojo::JSON required for testing interop\n[2017/02/10 10:13:13.212] t/97_unshare_hek.t .......... ok\n[2017/02/10 10:13:13.278] t/98_56only.t ............... ok\n[2017/02/10 10:13:13.457] t/99_binary.t ............... ok\n[2017/02/10 10:13:13.517] t/gh70-asan.t ............... ok\n[2017/02/10 10:13:13.619] t/z_kwalitee.t .............. skipped: This test is only run for the module author\n[2017/02/10 10:13:13.687] t/z_leaktrace.t ............. ok\n[2017/02/10 10:13:13.746] t/z_meta.t .................. skipped: This test is only run for the module author\n[2017/02/10 10:13:13.804] t/z_perl_minimum_version.t .. skipped: Author tests not required for installation\n[2017/02/10 10:13:13.906] t/z_pod-coverage.t .......... skipped: This test is only run for the module author\n[2017/02/10 10:13:13.985] t/z_pod-spell-mistakes.t .... skipped: This test is only run for the module author\n[2017/02/10 10:13:14.043] t/z_pod-spelling.t .......... skipped: This test is only run for the module author\n[2017/02/10 10:13:14.141] t/z_pod.t ................... skipped: This test is only run for the module author\n[2017/02/10 10:13:14.263] t/zero-mojibake.t ........... ok\n[2017/02/10 10:13:14.263] Test Summary Report\n[2017/02/10 10:13:14.263] -------------------\n[2017/02/10 10:13:14.264] t/11_pc_expo.t            (Wstat: 256 Tests: 8 Failed: 1)\n[2017/02/10 10:13:14.264]   Failed test:  8\n[2017/02/10 10:13:14.264]   Non-zero exit status: 1\n[2017/02/10 10:13:14.266] Files=62, Tests=2312,  6 wallclock secs ( 0.87 usr  0.05 sys +  5.08 cusr  0.21 csys =  6.21 CPU)\n[2017/02/10 10:13:14.266] Result: FAIL\n[2017/02/10 10:13:14.267] Failed 1/62 test programs. 1/2312 subtests failed.\n[2017/02/10 10:13:14.271] Makefile:1049: recipe for target 'test_dynamic' failed\n[2017/02/10 10:13:14.271] make: *** [test_dynamic] Error 255","files":null}]}